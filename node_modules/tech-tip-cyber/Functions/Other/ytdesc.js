const fetch = require('node-superfetch')
const { yt_api } = require('./sec.json')

async function YTDescription(options = {}) {
    if(!options.YTChannel) throw new ReferenceError('YouTube ChannelID/Name Not Provided, Join https://discord.gg/2FMvpaUcWh For Help')

    try{ 
        const channel =  await fetch.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${options.YTChannel}&key=${yt_api}&maxResults=1&type=channel`)

        const data =  await fetch.get(`https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails,statistics,brandingSettings&id=${channel.body.items[0].id.channelId}&key=${yt_api}`)

        const desc = channel.body.items[0].snippet.description

        return desc
    } catch (err) {
        const channel =  await fetch.get(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=${options.YTChannel}&key=${yt_api}&maxResults=1&type=channel`)
        // if(!channel.body.items[0]) throw new ReferenceError(`No Channel With "${options.YTChannel}" Found, Join https://discord.gg/2FMvpaUcWh For Help`)
        const aerrora = (`No Channel With **${options.YTChannel}** Found, Join https://discord.gg/2FMvpaUcWh For Help`)
        if(!channel.body.items[0]) 
        return aerrora
    }
}

module.exports = YTDescription;